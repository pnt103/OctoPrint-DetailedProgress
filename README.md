# OctoPrint-TimesAndLayers

A plugin that sends M117 commands to the printer to display the progress of the print job being currently streamed. The message to display can be configured (some placeholders included).
![Example ETA](https://i.imgur.com/ocBp152.jpg)
![Example ETL](https://i.imgur.com/oJiMm2p.jpg)
![Example Percent](https://i.imgur.com/McaCNsx.jpg)

This is derived from the OctoPrint-DetailedProgress plugin (0.1.4) by Dattas Moonchaser.
I've added a check for layer change events generated by
the OctoPrint-DisplayLayerProgress plugin by Olli.
TimesAndLayers cycles through a list of progress messages at approximately 6 second intervals.
If Olli's DisplayLayerProgress plugin is present, layer information can be one of the messages.

## Setup

Install via the bundled [Plugin Manager](https://github.com/foosel/OctoPrint/wiki/Plugin:-Plugin-Manager)
or manually using this URL:

    https://github.com/pnt103/OctoPrint-TimesAndLayers/archive/master.zip

## Configuration

``` yaml
plugins:
  detailedprogress:
    # Number of seconds (minimum) to rotate the messages
    time_to_change: 10
    # format used for ETA (estimated time of completion) message
    eta_strftime: "%H:%M:%S %dth %b"
    # format used for ETL (estimated time left) message
    etl_format: "{hours:02d}:{minutes:02d}:{seconds:02d}"
    # format for layer progess messages, if used
    layer_format: "Layer {currentL"} of {totalL}"
    # List of messages to display.  Placeholders:
    # - completion : the %age completed (NB some printers cannot cope with '%' symbol)
    # - printTimeLeft: estimation, formatted using "etl_format" 
    # - ETA: The estimated time/date of completion, formatted using "eta_strftime"
    #    %H hours	%M minutes	%S seconds
    #	 %d day of month (1-31)		%b 3-character month name
    #	 %m month number (1-12)		%a 3-character weekday name
    # - filepos: The current position in the file currently being printed
    messages:
      - "{completion:.2f}% complete"
      - "ETL: {printTimeLeft}"
      - "ETA: {ETA}"
```
